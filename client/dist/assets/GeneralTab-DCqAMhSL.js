import{r as d,j as e,at as f,g as y,au as g,av as L,aw as I,v as p,ax as v,u as N,ay as O,az as k,aA as T,A as E,aB as b,aC as w,s as m,t as C,aD as j}from"./index-BBXadzZ0.js";import{L as D,S as M,G as _,C as A}from"./tab-CpR-np10.js";import{N as B}from"./NonData-DJp1MxrL.js";import{M as G}from"./Modal-3Qb9nTYM.js";function H({children:c,loadMore:r,height:a=null,isLoading:t,...s}){const o=d.useRef(null);return d.useEffect(()=>{const h=l=>{const{scrollHeight:u,scrollTop:x}=l.target,n=o.current;u-x-50<=n.offsetHeight&&r()},i=o.current;return i&&i.addEventListener("scroll",h),()=>{i&&i.removeEventListener("scroll",h)}},[t]),e.jsxs(e.Fragment,{children:[e.jsx(f,{ref:o,height:a,...s,children:c}),t&&e.jsx(y,{})]})}const R="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.8857%2019.3708L11.2259%2012.7251C10.7353%2013.1294%2010.1594%2013.4456%209.49813%2013.6735C8.83686%2013.9014%208.12584%2014.0153%207.36506%2014.0153C5.49641%2014.0153%203.9142%2013.3668%202.61845%2012.0697C1.32269%2010.7726%200.674805%209.20771%200.674805%207.37509C0.674805%205.54247%201.32336%203.97761%202.62048%202.68051C3.91758%201.38341%205.48661%200.734863%207.32756%200.734863C9.16849%200.734863%2010.7333%201.38341%2012.0221%202.68051C13.3109%203.97761%2013.9553%205.54372%2013.9553%207.37884C13.9553%208.11184%2013.8457%208.80461%2013.6265%209.45716C13.4073%2010.1097%2013.0785%2010.7229%2012.6401%2011.2968L19.3249%2017.9316L17.8857%2019.3708ZM7.34503%2012.0349C8.63935%2012.0349%209.73456%2011.5804%2010.6307%2010.6715C11.5268%209.76267%2011.9748%208.66386%2011.9748%207.37509C11.9748%206.08632%2011.5261%204.98751%2010.6286%204.07864C9.7311%203.16976%208.63658%202.71531%207.34503%202.71531C6.0396%202.71531%204.93161%203.16976%204.02108%204.07864C3.11055%204.98751%202.65528%206.08632%202.65528%207.37509C2.65528%208.66386%203.10985%209.76267%204.019%2010.6715C4.92815%2011.5804%206.03683%2012.0349%207.34503%2012.0349Z'%20fill='%23FF881B'/%3e%3c/svg%3e";function P({list:c=[],onSelect:r=null,isClose:a}){const t=s=>{r("schoolNm",s.SCHUL_NM),r("schoolCd",s.SD_SCHUL_CODE)};return c.map((s,o)=>e.jsxs(g,{children:[e.jsx(L,{children:s.SCHUL_NM}),e.jsx(I,{children:s.ORG_RDNMA}),e.jsx(p,{type:"button",theme:"revers",style:v,onClick:()=>{a(!1),t(s)},children:"선택"})]},o))}function K({isOpen:c,isClose:r,setFieldValue:a}){const[t,s]=d.useState({region:"",schoolName:"",pIndex:1}),[o,h]=d.useState([]),[i,l]=N(E.schoolList),u=async()=>{if(i)return;const n=await l({...t,pIndex:t.pIndex+1});h(S=>[...S,...n]),s(S=>({...S,pIndex:S.pIndex+1}))},x=async()=>{const n=await l({...t,pIndex:1});h(n)};return e.jsxs(G,{title:"학교검색",isOpen:c,isClose:r,children:[e.jsxs(O,{children:[e.jsx(k,{onChange:n=>s({...t,region:n.target.value}),children:D.map(n=>e.jsx("option",{value:n.key,children:n.label},n.key))}),e.jsxs(T,{children:[e.jsx("input",{type:"text",onInput:n=>s({...t,schoolName:n.target.value}),onKeyDown:n=>{n.key==="Enter"&&x()},placeholder:"학교명 입력"}),e.jsx("button",{type:"button",onClick:x,children:e.jsx("img",{src:R,alt:"검색"})})]})]}),e.jsx(H,{loadMore:u,isLoading:i,height:500,children:o.length?e.jsx(P,{list:o,onSelect:a,isClose:r}):e.jsx(B,{children:"학교를 검색해주세요."})})]})}function U({name:c="",value:r="",checked:a=!1,onChange:t,children:s}){const o=d.useId();return e.jsxs(b,{children:[e.jsx("input",{id:o,name:c,type:"radio",value:r,checked:a,onChange:t}),e.jsx("label",{htmlFor:o,children:s})]})}function Y({setIsOpen:c,schoolSelect:r={},userAgeCd:a="",setFieldValue:t}){const s=a||"m",[o,h]=d.useState(s);d.useEffect(()=>{h(s)},[a]);const i=l=>{h(l),t("userAgeCd",l),t("schoolCd",""),t("schoolNm",""),t("grade",""),t("classNo","")};return e.jsxs("div",{children:[e.jsx(w,{children:M.map(l=>e.jsx(U,{name:"userAgeCd",value:l.key,checked:o===l.key,onChange:()=>i(l.key),children:l.label},l.key))}),o!=="n"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{col:2,children:[e.jsx(C,{type:"hidden",name:"schoolCd"}),e.jsx(C,{name:"schoolNm",readonly:!0}),e.jsx(p,{theme:"revers",onClick:()=>c(!0),children:"학교검색"})]}),e.jsxs(m,{col:2,children:[e.jsx(j,{name:"grade",options:_,style:{flex:1}}),e.jsx(j,{name:"classNo",options:A,style:{flex:1}})]})]})]})}export{Y as G,K as S};
