import{r as b,u as A,z as C,j as e,I as N,J as M,K as f,L as T,s as m,t as n,v as g,O as k,B as I,g as w,A as y,y as v,d as B,D as E,b as S,V as L}from"./index-BBXadzZ0.js";import{H as U}from"./Header-Ciq_Nrm5.js";import"./Title.styled-d_6YcK5y.js";import"./Terms.styled-DLbUkG53.js";import{c as F}from"./icon_result-C77dOc0Z.js";import{A as O}from"./Alert-BufmXSUj.js";import{C as P}from"./Comment-3vEigxB0.js";import{S as z}from"./SignStepTitle-D6_xw6gX.js";import{G as H,S as R}from"./GeneralTab-DCqAMhSL.js";import D from"./NotFound-D7zb3Fab.js";import"./tab-CpR-np10.js";import"./NonData-DJp1MxrL.js";import"./Modal-3Qb9nTYM.js";const G=({initialValues:s,request:i,setFetch:a})=>{const[d,l]=b.useState(!1),[c,u]=A(y.checkDuplicateId),{openModal:h}=C(),x=async(o,t)=>{if(!c)try{await f.schema.validateAt("userId",{userId:o});const r=await u(o),{result:p,resultMessage:j}=r;p.duplicateNo!==0&&t("userId",""),h({text:j})}catch(r){console.error(r.errors[0])}};return e.jsx(N,{children:e.jsx(M,{initialValues:s,validationSchema:f.schema,onSubmit:(o,{setSubmitting:t})=>{i&&i(o).then(r=>{a&&a(r)}).catch(r=>{console.error("submit failed:",r)}).finally(()=>{t(!1)})},children:({isSubmitting:o,setFieldValue:t,values:r})=>e.jsxs(T,{children:[e.jsxs(m,{col:2,children:[e.jsx(n,{name:"userId"}),e.jsx(g,{theme:"revers",onClick:()=>x(r.userId,t),children:"중복확인"})]}),e.jsxs(m,{children:[e.jsx(n,{type:"password",name:"userPw",placeholder:"비밀번호"}),e.jsx(n,{type:"password",name:"userPwConfirm",placeholder:"비밀번호 확인"}),e.jsx("span",{style:{fontSize:"1.4rem",color:"#878787"},children:"영문, 숫자, 특수기호를 포함한 8~16자리"})]}),e.jsxs(m,{children:[e.jsx(n,{type:"text",name:"userNm",placeholder:"이름",readonly:!0}),e.jsx(k,{telName:"mobileCarrier",phoneName:"userPhoneNo",readonly:!0}),e.jsx(n,{type:"text",name:"userEmail",placeholder:"이메일"})]}),e.jsx(m,{style:{borderTop:"1px solid #EAEAEA",paddingTop:"2rem"},children:e.jsx(H,{setIsOpen:l,setFieldValue:t})}),e.jsx(I,{children:e.jsx(g,{type:"submit",children:"가입하기"})}),e.jsx(R,{isOpen:d,isClose:l,setFieldValue:t}),o||c&&e.jsx(w,{})]})})})},J={margin:"2rem 0 1rem"};function K({phone:s="",mobileCarrier:i="",userNm:a=""}){const[d,l]=b.useState(!1),{goToLogin:c}=v(),{initialValues:u,schema:h}=f,{signUp:x}=y,{openModal:o}=C(),t=r=>{const{resultCode:p,resultMessage:j}=r;if(p!=200){o({text:j});return}l(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{backButton:!0,title:"회원가입",subMenu:!1}),e.jsxs(B,{mode:"center",children:[e.jsx(E,{maxWidth:500,children:e.jsxs("div",{children:[e.jsx(z,{step:3,children:"회원정보 입력"}),e.jsxs(P,{top:10,children:["회원가입을 위해 ",e.jsx("br",{})," 회원정보를 입력해주세요."]}),e.jsx(G,{initialValues:{...u,userPhoneNo:s,mobileCarrier:i,userNm:a},schema:h,request:x,setFetch:t})]})}),e.jsxs(O,{isOpen:d,max:300,children:[e.jsx("img",{src:F,alt:"회원가입 완료"}),e.jsx(S,{size:24,weight:500,align:"center",style:J,children:"회원가입 완료"}),e.jsxs(S,{weight:400,color:"#9B9798",align:"center",children:["지금 바로 미디어리터러시 ",e.jsx("br",{}),"퀴즈를 풀어보세요!"]}),e.jsx(I,{children:e.jsx(g,{onClick:c,children:"로그인"})})]})]})]})}function oe(){const{state:s}=L();return e.jsx(e.Fragment,{children:!(s!=null&&s.phone)||!(s!=null&&s.mobileCarrier)||!(s!=null&&s.userNm)?e.jsx(D,{}):e.jsx(K,{phone:s.phone,mobileCarrier:s.mobileCarrier,userNm:s.userNm})})}export{oe as default};
