import{j as e,b as j,B as k,v as D,y as v,a2 as N,a3 as I,n as R,Q as $,g as B,u as P,r as i,z as Q,d as W,A as G,V as O}from"./index-BBXadzZ0.js";import{H as L,B as V,b as Z,C as p,c as b,d as _,a as M}from"./ShopTemplate-BTjW4HOx.js";import{H as q}from"./Header-Ciq_Nrm5.js";import{B as J}from"./ButtomPositionModal-Byo7j5tV.js";import{S as K}from"./SectionContainer-CGhBODQp.js";import X from"./Error-CbMjSY8D.js";import"./Box.styled-DN2A2xhE.js";import"./VisualBox-D9aPQ8lm.js";import"./WindowInfinityScrollContainer-81HpgYqX.js";import"./replace-BG-69Hno.js";function Y({productDc:t,onClick:s}){return e.jsx(L,{bg:"#F4F3F8",children:e.jsxs(V,{children:[e.jsxs("div",{style:{lineHeight:1.4},children:[e.jsx(j,{size:14,color:"#666666",style:{whiteSpace:"pre-line",marginBottom:"2rem"},children:t}),e.jsx(j,{size:14,color:"#666666",children:"본 상품은 미디어리터러시에서 특가형태로 제공되는 모바일 상품권 교환권 입니다."}),e.jsx(j,{size:14,color:"#666666",style:{margin:"1rem 0"},children:"미디어리터러시 내 상품은 물품의 재고 상황에 따라 변경될 수 있습니다"}),e.jsx(j,{size:14,color:"#666666",children:"쿠폰번호 발급 후 재사용 불가하며, 재판매가 불가합니다. 구매 전 반드시 주의사항을 확인해주세요."})]}),e.jsx(k,{children:e.jsx(D,{onClick:()=>s(!0),children:"교환하기"})})]})})}function ee({isOpen:t,isClose:s,handlePurchase:a,userDataLoading:r,brandNm:c,productNm:l,productCd:d,productPrice:u,point:o=0,isCashSufficient:h,purchaseLoading:m}){const{goToPage:f}=v();N.useEffect(()=>{g()},[t]);const g=()=>{if(t){document.body.style.overflow="hidden";return}document.body.style.overflow="auto"};return e.jsxs(e.Fragment,{children:[e.jsx(J,{isOpen:t,onClose:()=>s(!1),children:r?e.jsx("div",{style:{textAlign:"center",padding:"10% 0"},children:e.jsx(I,{color:"#FF881B"})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsxs("b",{className:"productTitle",children:["[",c,"]"]}),e.jsx("p",{className:"productContent",children:l}),e.jsx(p,{fontSize:20,top:15,price:u})]}),e.jsxs("div",{children:[e.jsxs(b,{children:[e.jsx(j,{weight:500,color:"#666",children:"현재 보유 캐시"}),e.jsx(p,{price:o})]}),e.jsxs(b,{style:{marginTop:"0.7rem"},children:[e.jsx(j,{weight:500,color:h?"#666":"#FF0000",children:h?"구매 후 캐시":"부족한 캐시"}),e.jsx(p,{price:o-u,color:h?"#000":"#FF0000"})]})]}),e.jsx(k,{children:h?e.jsx(D,{style:{flex:1},onClick:()=>a({productCd:d}),children:"구매하기"}):e.jsx(D,{style:{flex:1},onClick:()=>f(R[$].path),children:"캐시 받으러 가기"})})]})}),m&&e.jsx(B,{})]})}function te({brandNm:t,productNm:s,productPrice:a,imageLink:r}){return e.jsx(L,{children:e.jsx(K,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(_,{image:r}),e.jsxs("p",{style:{fontSize:"1.8rem",fontWeight:500},children:["[",t,"]"]}),e.jsx("p",{style:{fontSize:"1.8rem",fontWeight:500,marginTop:"0.5rem"},children:s}),e.jsx(p,{fontSize:20,top:2.4,price:a})]})})})}function se({productDetailData:t={}}){const{brandNm:s="",productCd:a="",productNm:r="",productPrice:c=0,productDc:l="",imageLink:d=""}=t,{goBack:u}=v(),[o,h]=P(G.userDatas),[m,f]=i.useState({}),[g,z]=i.useState(!1),[T,w]=i.useState(!1),[y,A]=P(M.purchase),{openModal:S}=Q(),H=i.useCallback(async()=>{if(!o)try{const x=(await h()).result.data;f(x);const C=E(x.point,c);z(C)}catch(n){console.error(n)}},[m,t]);function E(n,x){return n>=x}const F=n=>{n&&H(),w(n)},U=async({productCd:n})=>{if(y)return;const x=await A({productCd:n}),{resultCode:C}=x;if(C!=200){S({text:"오류가 발생했습니다. 다시 시도해주세요."});return}S({text:"구매되었습니다."}),u()};return e.jsxs(e.Fragment,{children:[e.jsx(q,{backButton:!0,title:!0,subMenu:!1,border:0}),e.jsxs(W,{children:[e.jsx(te,{brandNm:s,productNm:r,productPrice:c,imageLink:d||null}),e.jsx(Y,{productDc:l,onClick:F})]}),e.jsx(ee,{isOpen:T,isClose:F,handlePurchase:U,userDataLoading:o,brandNm:s,productNm:r,productCd:a,productPrice:c,point:m.point,isCashSufficient:g,purchaseLoading:y})]})}function xe(){const{state:t=""}=O(),s=Object.entries(t).length!==0,a=t,[r,c]=P(M.productDetail),[l,d]=i.useState({});i.useEffect(()=>{u()},[]);const u=i.useCallback(async()=>{if(!r)try{const o=await c({productCd:a});d(o.data)}catch(o){console.error(o)}},[l]);return e.jsxs(e.Fragment,{children:[s?e.jsx(se,{productDetailData:l}):e.jsx(X,{}),r&&e.jsx(B,{})]})}export{xe as default};
